type color-ctx =
  | Empty
  | Simple of color
  | Nested of match-data list

and match-data = (int * int * string * color-ctx) option

type regex-vm = (|
  pos-stack : int list;
  matched   : match-data list;
|)

let regex-vm-init = (|
  pos-stack = [];
  matched   = [];
|)
